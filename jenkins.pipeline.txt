pipeline{
  agent any
   stages{
    stage('checkout'){
     steps {
      git 'https://github.com/cloudmaster2025/sonar.git'
           } 
         }
    stage('build'){
     steps {
      sh '/opt/maven/bin/mvn clean package'
           } 
        }
    stage('test'){
     steps {
       withSonarQubeEnv(installationName: my-sonar, credentialsId: 'sonar-cred') {
    sh '''/opt/maven/bin/mvn clean verify sonar:sonar \
          -Dsonar.projectKey=studentapp'''
      }
           } 
       }
       stage('deploy'){
     steps {
      echo 'build success'
           } 
}
}
}
